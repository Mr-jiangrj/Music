import{R as e,S as a,r as s,z as r,j as t,M as l,N as u,Q as o,U as i,W as p,X as n,as as m,a4 as v}from"./index-661ec728.js";import{C as y}from"./CoverLists-d250c179.js";import{P as c}from"./index-8234b238.js";import"./album-52ed55ed.js";import"./FormItem-6ada1754.js";import"./Select-289431c4.js";import"./getCoverUrl-381066ed.js";import"./Tooltip-7286355b.js";import"./PlayOne-c57c555f.js";import"./LinkTwo-82bd962a.js";import"./Unlike-f56e8f6e.js";import"./Grid-8b78ec37.js";import"./Skeleton-e15f2934.js";import"./use-houdini-0fca5f1d.js";const g={class:"playlists"},j={__name:"playlists",setup(j){const{t:d}=e(),C=a(),h=s(C.currentRoute.value.query.keywords),q=s([]),f=s(0),k=s(30),N=s(C.currentRoute.value.query.page?Number(C.currentRoute.value.query.page):1),T=(e,a=30,s=0,r=1e3)=>{m(e,a,s,r).then((e=>{f.value=e.result.playlistCount,q.value=[],e.result.playlists?e.result.playlists.forEach((e=>{q.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:v(e.playCount)})})):$message.error(d("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};r((()=>C.currentRoute.value),(e=>{h.value=e.query.keywords,N.value=Number(e.query.page?e.query.page:1),"s-playlists"==e.name&&T(h.value,k.value,(N.value-1)*k.value)}));const b=e=>{k.value=e,T(h.value,e,(N.value-1)*k.value)},R=e=>{C.push({path:"/search/playlists",query:{keywords:h.value,page:e}})};return t((()=>{T(h.value,k.value,(N.value-1)*k.value)})),(e,a)=>(l(),u("div",g,[o(y,{listData:i(q)},null,8,["listData"]),i(q)[0]?(l(),p(c,{key:0,pageNumber:i(N),totalCount:i(f),onPageSizeChange:b,onPageNumberChange:R},null,8,["pageNumber","totalCount"])):n("",!0)]))}};export{j as default};
