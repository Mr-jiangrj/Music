import{R as e,S as a,r as s,z as u,j as r,M as t,N as l,Q as o,U as i,W as m,X as n,as as p,a6 as v}from"./index-661ec728.js";import{C as c}from"./CoverLists-d250c179.js";import{P as b}from"./index-8234b238.js";import"./album-52ed55ed.js";import"./FormItem-6ada1754.js";import"./Select-289431c4.js";import"./getCoverUrl-381066ed.js";import"./Tooltip-7286355b.js";import"./PlayOne-c57c555f.js";import"./LinkTwo-82bd962a.js";import"./Unlike-f56e8f6e.js";import"./Grid-8b78ec37.js";import"./Skeleton-e15f2934.js";import"./use-houdini-0fca5f1d.js";const g={class:"albums"},j={__name:"albums",setup(j){const{t:d}=e(),y=a(),h=s(y.currentRoute.value.query.keywords),T=s([]),q=s(0),C=s(30),f=s(y.currentRoute.value.query.page?Number(y.currentRoute.value.query.page):1),k=(e,a=30,s=0,u=10)=>{p(e,a,s,u).then((e=>{q.value=e.result.albumCount,T.value=[],e.result.albums?e.result.albums.forEach((e=>{T.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:v(e.publishTime)})})):$message.error(d("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};u((()=>y.currentRoute.value),(e=>{h.value=e.query.keywords,f.value=Number(e.query.page?e.query.page:1),"s-albums"==e.name&&k(h.value,C.value,(f.value-1)*C.value)}));const N=e=>{C.value=e,k(h.value,e,(f.value-1)*C.value)},R=e=>{y.push({path:"/search/albums",query:{keywords:h.value,page:e}})};return r((()=>{k(h.value,C.value,(f.value-1)*C.value)})),(e,a)=>(t(),l("div",g,[o(c,{listData:i(T),listType:"album"},null,8,["listData"]),i(T)[0]?(t(),m(b,{key:0,pageNumber:i(f),totalCount:i(q),onPageSizeChange:N,onPageNumberChange:R},null,8,["pageNumber","totalCount"])):n("",!0)]))}};export{j as default};
