import{_ as e,R as a,S as s,a7 as n,r as o,j as l,z as t,U as i,M as r,N as m,O as c,Q as d,Y as p,W as u,X as f,ah as g,Z as v,$ as y,b4 as h,b5 as k,a4 as T,ad as b,aA as j,ac as _,a1 as C,a2 as $,b6 as L,a6 as M,b7 as P,aC as x,ap as H}from"./index-661ec728.js";import{g as w,C as D}from"./index-8699bcf8.js";import{C as U}from"./CoverLists-d250c179.js";import{_ as S,g as F}from"./getCoverUrl-381066ed.js";import{a as R}from"./headers-ac62c6db.js";import{P as q}from"./People-eef40241.js";import{T as I}from"./Time-52743681.js";import{P as A}from"./PlayOne-c57c555f.js";import{L as E,C as O}from"./ListAdd-a3933c80.js";import{Y as V}from"./Youtube-edd8b845.js";import{_ as Y}from"./LinkTwo-82bd962a.js";import{_ as G}from"./Divider-2b7c1bdc.js";import"./Skeleton-e15f2934.js";import"./use-houdini-0fca5f1d.js";import"./album-52ed55ed.js";import"./FormItem-6ada1754.js";import"./Select-289431c4.js";import"./Unlike-f56e8f6e.js";import"./Grid-8b78ec37.js";import"./Tooltip-7286355b.js";const N={key:0,class:"song"},Q={class:"detail"},z={class:"pic"},W={class:"cover-loading"},X={class:"right"},Z={class:"intr"},B={class:"item"},J={class:"item"},K={key:1,class:"item"},ee={key:0,class:"comments"},ae={class:"content"},se={key:1,class:"simiPlayList"},ne=e({__name:"SongView",setup(e){const{t:ne}=a(),oe=s(),le=n(),te=o(null),ie=o(oe.currentRoute.value.query.id),re=o(null),me=o([]),ce=o([]),de=e=>{h(e).then((a=>{a.songs[0]?(re.value=a.songs[0],$setSiteTitle(a.songs[0].name+" - "+a.songs[0].ar[0].name+" - "+ne("general.name.song")),pe(e),ue(e),"undefined"!=typeof $scrollToTop&&$scrollToTop()):$message.error(ne("general.message.acquisitionFailed"))}))},pe=e=>{w(e).then((e=>{e.total>0&&(me.value=e.hotComments)})).catch((e=>{console.error(ne("general.message.acquisitionFailed"),e),$message.error(ne("general.message.acquisitionFailed"))}))},ue=e=>{k(e).then((e=>{ce.value=[],e.playlists.forEach((e=>{ce.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:T(e.playCount)})}))}))};return l((()=>{ie.value&&de(ie.value)})),t((()=>oe.currentRoute.value),(e=>{ie.value=e.query.id,"song"==e.name&&de(ie.value)})),(e,a)=>{var s,n,o;const l=Y,t=S,h=b,k=x,T=j,w=_,ne=H,de=R,pe=G;return i(re)?(r(),m("div",N,[c("div",Q,[c("div",z,[d(t,{"show-toolbar-tooltip":"",class:"coverImg","previewed-img-props":{style:{borderRadius:"8px"}},"preview-src":i(F)(null==(s=i(re))?void 0:s.al.picUrl),src:i(F)(null==(n=i(re))?void 0:n.al.picUrl,1024),"fallback-src":"/images/pic/default.png"},{placeholder:p((()=>[c("div",W,[d(l)])])),_:1},8,["preview-src","src"]),d(t,{class:"shadow","preview-disabled":"",src:i(F)(null==(o=i(re))?void 0:o.al.picUrl,1024),"fallback-src":"/images/pic/default.png"},null,8,["src"])]),c("div",X,[c("div",Z,[d(h,{class:"name text-hidden",innerHTML:i(re).name},null,8,["innerHTML"]),i(re).alia[0]?(r(),u(h,{key:0,depth:"3",class:"alia",innerHTML:i(re).alia[0]},null,8,["innerHTML"])):f("",!0),d(T,{class:"tag"},{default:p((()=>[1==i(re).fee||4==i(re).fee?(r(),u(k,{key:0,class:"vip",round:"",bordered:!1},{default:p((()=>[C($(1==i(re).fee?"VIP":"EP"),1)])),_:1})):f("",!0),i(re).pc?(r(),u(k,{key:1,class:"cloud",round:"",type:"info",bordered:!1},{default:p((()=>[C($(e.$t("general.name.cloud")),1)])),_:1})):f("",!0)])),_:1}),c("div",B,[d(w,{depth:3,component:i(q)},null,8,["component"]),i(re).ar?(r(),u(g,{key:0,artistsData:i(re).ar,isDark:!1},null,8,["artistsData"])):f("",!0)]),c("div",J,[d(w,{depth:3,component:i(L)},null,8,["component"]),d(h,{class:"text",innerHTML:i(re).al.name,onClick:a[0]||(a[0]=e=>i(oe).push(`/album?id=${i(re).al.id}`))},null,8,["innerHTML"])]),i(re).publishTime?(r(),m("div",K,[d(w,{depth:3,component:i(I)},null,8,["component"]),d(h,{class:"text",innerHTML:i(M)(i(re).publishTime)},null,8,["innerHTML"])])):f("",!0)]),d(T,{class:"button"},{default:p((()=>[d(ne,{type:"primary",strong:"",secondary:"",onClick:a[1]||(a[1]=e=>(e=>{const a={album:e.al,artist:e.ar,fee:e.fee,id:e.id,name:e.name};le.setPersonalFmMode(!1),le.addSongToPlaylists(a)})(i(re)))},{icon:p((()=>[d(w,{component:i(A)},null,8,["component"])])),default:p((()=>[C(" "+$(e.$t("general.name.play")),1)])),_:1}),d(ne,{strong:"",secondary:"",onClick:a[2]||(a[2]=e=>i(te).openAddToPlaylist(i(ie)))},{icon:p((()=>[d(w,{component:i(E)},null,8,["component"])])),default:p((()=>[C(" "+$(e.$t("general.name.add")),1)])),_:1}),d(ne,{strong:"",secondary:"",onClick:a[3]||(a[3]=e=>i(oe).push(`/comment?id=${i(re).id}&page=1`))},{icon:p((()=>[d(w,{component:i(O)},null,8,["component"])])),default:p((()=>[C(" "+$(e.$t("general.name.comment")),1)])),_:1}),i(re).mv?(r(),u(ne,{key:0,strong:"",secondary:"",onClick:a[4]||(a[4]=e=>i(oe).push(`/video?id=${i(re).mv}`))},{icon:p((()=>[d(w,{component:i(V)},null,8,["component"])])),default:p((()=>[C(" MV ")])),_:1})):f("",!0)])),_:1})])]),i(me)[0]?(r(),m("div",ee,[d(de,{prefix:"bar"},{default:p((()=>[C($(e.$t("general.name.hotComments")),1)])),_:1}),c("div",ae,[(r(!0),m(v,null,y(i(me),(e=>(r(),u(D,{key:e,commentData:e},null,8,["commentData"])))),128))])])):f("",!0),i(ce)[0]?(r(),m("div",se,[d(pe),d(de,{prefix:"bar"},{default:p((()=>[C($(e.$t("other.containing")),1)])),_:1}),d(U,{listData:i(ce)},null,8,["listData"])])):f("",!0),d(P,{ref_key:"addPlayListRef",ref:te},null,512)])):f("",!0)}}},[["__scopeId","data-v-bcf36198"]]);export{ne as default};
