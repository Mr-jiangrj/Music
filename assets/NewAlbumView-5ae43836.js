import{b as e}from"./album-52ed55ed.js";import{_ as a,R as l,S as t,r as u,z as r,j as s,M as o,N as n,O as i,a2 as m,Q as p,Y as v,U as c,W as b,X as y,a6 as g,aA as d,Z as j,$ as h,a1 as f,aC as q}from"./index-661ec728.js";import{C as w}from"./CoverLists-d250c179.js";import{P as C}from"./index-8234b238.js";import"./FormItem-6ada1754.js";import"./Select-289431c4.js";import"./getCoverUrl-381066ed.js";import"./Tooltip-7286355b.js";import"./PlayOne-c57c555f.js";import"./LinkTwo-82bd962a.js";import"./Unlike-f56e8f6e.js";import"./Grid-8b78ec37.js";import"./Skeleton-e15f2934.js";import"./use-houdini-0fca5f1d.js";const T={class:"new-album"},k={class:"title"},A={class:"key"},L=a({__name:"NewAlbumView",setup(a){const{t:L}=l(),N=t(),R=u([]),_=u(0),P=u(30),S=u(N.currentRoute.value.query.page?Number(N.currentRoute.value.query.page):1),$=u(N.currentRoute.value.query.area?N.currentRoute.value.query.area:"ALL"),U=[{label:L("general.type.all"),value:"ALL"},{label:L("general.type.china"),value:"ZH"},{label:L("general.type.western"),value:"EA"},{label:L("general.type.japan"),value:"JP"},{label:L("general.type.korea"),value:"KR"}],x=(a,l=30,t=0)=>{e(a,l,t).then((e=>{_.value=e.total,R.value=[],e.albums?e.albums.forEach((e=>{R.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:g(e.publishTime)})})):$message.error(L("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};r((()=>N.currentRoute.value),(e=>{$.value=e.query.area?e.query.area:"ALL",S.value=Number(e.query.page?e.query.page:1),"new-album"==e.name&&x($.value,P.value,(S.value-1)*P.value)}));const E=e=>{P.value=e,x($.value,e,(S.value-1)*P.value)},F=e=>{N.push({path:"/new-album",query:{area:$.value,page:e}})};return s((()=>{$setSiteTitle(L("home.title.newAlbum")),x($.value,P.value,(S.value-1)*P.value)})),(e,a)=>{const l=q,t=d;return o(),n("div",T,[i("div",k,[i("span",A,m(e.$t("home.title.newAlbum")),1)]),p(t,{class:"category"},{default:v((()=>[(o(),n(j,null,h(U,(e=>p(l,{class:"tag",round:"",key:e,bordered:!1,type:e.value==c($)?"primary":"default",onClick:a=>{return l=e.value,void N.push({path:"/new-album",query:{area:l,page:1}});var l}},{default:v((()=>[f(m(e.label),1)])),_:2},1032,["type","onClick"]))),64))])),_:1}),p(w,{listData:c(R),listType:"album"},null,8,["listData"]),c(R)[0]?(o(),b(C,{key:0,pageNumber:c(S),totalCount:c(_),onPageSizeChange:E,onPageNumberChange:F},null,8,["pageNumber","totalCount"])):y("",!0)])}}},[["__scopeId","data-v-f2fcd008"]]);export{L as default};
