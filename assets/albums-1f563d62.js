import{c as e}from"./artist-e317ad04.js";import{_ as a,S as u,r as t,j as r,z as s,M as l,N as o,Q as i,U as m,a6 as p}from"./index-661ec728.js";import{C as n}from"./CoverLists-d250c179.js";import{P as v}from"./index-8234b238.js";import"./album-52ed55ed.js";import"./FormItem-6ada1754.js";import"./Select-289431c4.js";import"./getCoverUrl-381066ed.js";import"./Tooltip-7286355b.js";import"./PlayOne-c57c555f.js";import"./LinkTwo-82bd962a.js";import"./Unlike-f56e8f6e.js";import"./Grid-8b78ec37.js";import"./Skeleton-e15f2934.js";import"./use-houdini-0fca5f1d.js";const j={class:"albums"},b=a({__name:"albums",setup(a){const b=u(),c=t(b.currentRoute.value.query.id),d=t([]),g=t(30),h=t(b.currentRoute.value.query.page?Number(b.currentRoute.value.query.page):1),f=t(0),y=(a,u=30,t=0)=>{e(a,u,t).then((e=>{f.value=e.artist.albumSize,d.value=[],e.hotAlbums?e.hotAlbums.forEach((e=>{d.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:p(e.publishTime)})})):$message.error("搜索内容为空"),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))},T=e=>{b.push({path:"/artist/albums",query:{id:c.value,page:e}})},q=e=>{g.value=e,y(c.value,e,(h.value-1)*g.value)};return r((()=>{y(c.value,g.value,(h.value-1)*g.value)})),s((()=>b.currentRoute.value),(e=>{c.value=e.query.id,h.value=Number(e.query.page?e.query.page:1),"ar-albums"==e.name&&y(c.value,g.value,(h.value-1)*g.value)})),(e,a)=>(l(),o("div",j,[i(n,{listData:m(d),listType:"album"},null,8,["listData"]),i(v,{totalCount:m(f),pageNumber:m(h),onPageSizeChange:q,onPageNumberChange:T},null,8,["totalCount","pageNumber"])]))}},[["__scopeId","data-v-66ff9219"]]);export{b as default};
